---
title: "TIL 250210"
description: "ìŠ¤í”„ë§ MVC - ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´ | ì•Œê³ ë¦¬ì¦˜ class 1 - 3ë¬¸ì œ | CS 6-2, 6-3 ì •ë¦¬ | EXP - ìŠ¤í”„ë§ ì…ë¬¸ 3ê°œ"
filter: "ğŸ§£2025.02"
---

# What I did

ìŠ¤í”„ë§ MVC - ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´

ì•Œê³ ë¦¬ì¦˜ class 1 - 3ë¬¸ì œ

CS 6-2, 6-3 ì •ë¦¬

EXP - ìŠ¤í”„ë§ ì…ë¬¸ 3ê°œ

# ë°°ìš´ì 

## ì•Œê³ ë¦¬ì¦˜

2562, 2884, 10250

- `ArrayList<Interger> alists` ì—ì„œ ë°”ë¡œ ì¸ë±ìŠ¤ë¥¼ ì“¸ ìˆ˜ ì—†ìŒ
    - alists.get[i] ë¡œ ë¶ˆëŸ¬ì˜´
- `Math.max(a, b)` ë„ ì“¸ ìˆ˜ ìˆë‹¤. (import ì—†ì´)
- í—·ê°ˆë¦° ë¶€ë¶„ - sc.nextInt(); í•˜ë©´ ì •ìˆ˜ 1ê°œë¥¼ ì¸ì‹í•¨.
    - sc.nextInt(); sc.nextInt(); í•˜ë©´ ë„ì–´ì“°ê¸°, ì¤„ ë°”ê¿ˆ ìƒê´€ ì—†ì´ ì •ìˆ˜ 2ê°œ ì¸ì‹.
- **`StringBuilder` - ë¬¸ìì—´ì„ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤**
    
    âœ… **`String` ëŒ€ì‹  `StringBuilder`ë¥¼ ì“°ëŠ” ì´ìœ ?**
    
    - `String`ì€ **ë¶ˆë³€(immutable)** â†’ ë¬¸ìì—´ ìˆ˜ì • ì‹œ **ìƒˆë¡œìš´ ê°ì²´ ìƒì„±** (ë©”ëª¨ë¦¬ ë¹„íš¨ìœ¨ì )
    - `StringBuilder`ëŠ” **ê°€ë³€(mutable)** â†’ ê¸°ì¡´ ë¬¸ìì—´ì„ **ìˆ˜ì • ê°€ëŠ¥** (ì†ë„ ë¹ ë¦„)
    - **ì—¬ëŸ¬ê°€ì§€ ê¸°ëŠ¥**
        
        ```java
        StringBuilder sb = new StringBuilder("Hello");
        
        // ë¬¸ìì—´ ì¶”ê°€
        sb.append(" World"); // "Hello World"
        
        // ë¬¸ìì—´ ì‚½ì…
        sb.insert(5, ","); // "Hello, World"
        
        // ë¬¸ìì—´ ì‚­ì œ
        sb.delete(5, 6); // "Hello World"
        
        // ë¬¸ìì—´ ë³€ê²½
        sb.replace(6, 11, "Java"); // "Hello Java"
        
        // ë’¤ì§‘ê¸°
        sb.reverse(); // "avaJ olleH"
        
        // ìµœì¢… ë¬¸ìì—´ ë³€í™˜
        String result = sb.toString(); // "avaJ olleH"
        ```
        

## ìŠ¤í”„ë§ mvc

### ì„œë¸”ë¦¿(ìš”ì²­ ë°ì´í„° api ë©”ì‹œì§€ ~ ì‘ë‹µ ë°ì´í„°)

## HTTP ìš”ì²­ ë°ì´í„° - API ë©”ì‹œì§€ ë°”ë”” (ë‹¨ìˆœ í…ìŠ¤íŠ¸)

- HTTP message body ì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­
    - HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, **JSON**, XML, TEXT
    - POST, PUT, PATCH

![image.png](attachment:91567dab-ba64-4c79-99da-aa3f78e2a1a4:image.png)

`RequestBodySpringServlet`

```java
@WebServlet (name = "RequestBodySpringServlet", urlPatterns = "/request-body-string")
public class RequestBodySpringServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ServletInputStream inputStream = request.getInputStream();// ë°”ë””ì˜ ë‚´ìš©ì„ ë°”ë¡œ ë°”ì´íŠ¸ ì½”ë“œë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);

        System.out.println("messageBody = " + messageBody);

        response.getWriter().write("ok");
```

![image.png](attachment:c2df13b7-293f-44f5-8016-67261a791887:image.png)

```bash
messageBody = hello!
```

## HTTP ìš”ì²­ ë°ì´í„° - API ë©”ì‹œì§€ ë°”ë”” (JSON)

- POST http://localhost:8080/request-body-json
- content-type: application/json
- message body: `{â€usernameâ€: â€œhelloâ€, â€œageâ€: 20}`
- ê²°ê³¼ `message body = {â€username": â€œhelloâ€, â€œageâ€: 20}`

### **JSON í˜•ì‹ íŒŒì‹± ì¶”ê°€**

`servlet/basic/HelloData`

```java
package hello.servlet.basic;

import lombok.Getter;
import lombok.Setter;

@Getter @Setter
public class HelloData {

    private String username;
    private int age;

}
```

`RequestBodyJsonServlet`

```java
@WebServlet(name = "requestBodyJsonServlet", urlPatterns = "/request-body-json")
public class RequestBodyJsonServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ServletInputStream inputStream = request.getInputStream();
        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);

        System.out.println("messageBody = " + messageBody);

    }
}
```

![image.png](attachment:1e341d2f-da98-4b15-8b6f-249983932cd2:image.png)

```bash
messageBody = {"username": "hello", "age": 20}
```

### HelloData ë¼ëŠ” ê°ì²´ë¡œ ë³€í™˜ - **ObjectMapper**

```java
@WebServlet(name = "requestBodyJsonServlet", urlPatterns = "/request-body-json")
public class RequestBodyJsonServlet extends HttpServlet {

    **private ObjectMapper objectMapper = new ObjectMapper();**

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ServletInputStream inputStream = request.getInputStream();
        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);

        System.out.println("messageBody = " + messageBody);

        **HelloData helloData = objectMapper.readValue(messageBody, HelloData.class);
        System.out.println("helloData.getUsername() = " + helloData.getUsername());
        System.out.println("helloData.getAge() = " + helloData.getAge());**
    }
}
```

ê°ì²´ë¡œë„ ì˜ ë¨.

```bash
messageBody = {"username": "hello", "age": 20}
helloData.getUsername() = hello
helloData.getAge() = 20
```

- JSON ê²°ê³¼ë¥¼ íŒŒì‹±í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìë°” ê°ì²´ë¡œ ë³€í™˜í•˜ë ¤ë©´ Jackson, Gson ê°™ì€ JSON ë³€í™˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ Spring MVCë¥¼ ì„ íƒí•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬(`ObjectMapper`)ë¥¼ í•¨ê»˜ ì œê³µ

## HTTPServletResponse

### ì—­í• 

**HTTP ì‘ë‹µ ë©”ì‹œì§€ ìƒì„±**

- HTTP ì‘ë‹µì½”ë“œ ì§€ì • (200, 404 ì´ëŸ°ê±°)
- í—¤ë” ìƒì„±
- ë°”ë”” ìƒì„±
- +Content-Type, ì¿ í‚¤, Redirect

### ê¸°ë³¸ ì‚¬ìš©ë²•

```java
package hello.servlet.basic.response;

@WebServlet(name = "responseHeaderServlet", urlPatterns = "/response-header")
public class ResponseHeaderServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //[status-line]
        response.setStatus(HttpServletResponse.SC_OK);

        //[response-headers]
        response.setHeader("Content-Type", "text/plain;charset=utf-8");
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Pragma", "no-cache");
        response.setHeader("my-header", "hello");
        
        //[header í¸ì˜ ë©”ì„œë“œ]
        content(response);
        cookie(response);
        redirect(response);

        PrintWriter writer = response.getWriter();
        writer.println("ok"); //ë’¤ì— enterê°€ ë“¤ì–´ê°€ì„œ Content-Length:3ìœ¼ë¡œ ë‚˜ì˜´

    }
}
```

setStatue(200); ì´ë ‡ê²Œ ì¨ë„ ë˜ì§€ë§Œ.. 

![image.png](attachment:dabfcfe2-6950-43bf-be66-562a337a52c9:image.png)

![image.png](attachment:6f702b4a-14ad-44d0-894e-931ddcdd35c8:image.png)

### í¸ì˜ ë©”ì„œë“œ

**Content**

```java
    private void content(HttpServletResponse response) {
//        Content-Type: text/plain;charset=utf-8
//        Content-Length: 2
//        response.setHeader("Content-Type", "text/plain;charset=utf-8");
        response.setContentType("text/plain");
        response.setCharacterEncoding("utf-8");
//        response.setContentLength(2); //(ìƒëµì‹œ ìë™ ìƒì„±)
    }
```

**ì¿ í‚¤**

```java
import jakarta.servlet.http.Cookie;
    
    
    private void cookie(HttpServletResponse response) {
//        Set-Cookie: myCookie=good; Max-Age=600;
//        response.setHeader("Set-Cookie", "myCookie=good; Max-Age=600");
        Cookie cookie = new Cookie("myCookie", "good");
        cookie.setMaxAge(600); //600ì´ˆ
        response.addCookie(cookie);
    }
```

![image.png](attachment:8045ece5-bf2e-4a8a-bc30-73f7450b80b1:image.png)

**redirect**

```java
    private void redirect(HttpServletResponse response) throws IOException {
        //Status Code 302
        //Location: /basic/hello-form.html
//        response.setStatus(HttpServletResponse.SC_FOUND); //302
//        response.setHeader("Location", "/basic/hello-form.html");
        response.sendRedirect("/basic/hello-form.html");
    }
```

Status: 302, Location : url ë©´ urlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

## HTTP ì‘ë‹µ ë°ì´í„°

### ë‹¨ìˆœ í…ìŠ¤íŠ¸ ì‘ë‹µ

`writer.println("ok");` - ì•ì—ì„œ ì‚´í´ë´„ (ResponseHeaderServlet ì°¸ê³ )

### HTML ì‘ë‹µ

```java
@WebServlet(name = "responseHtmlServlet", urlPatterns = "/response-html")
public class ResponseHtmlServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");

        PrintWriter writer = response.getWriter();
        writer.println("<html>");
        writer.println("<body>");
        writer.println(" <div>ì•ˆë…•?</div>");
        writer.println("</body>");
        writer.println("</html>");
    }
}
```

Content-Type: text/html;charset=utf-8 ë¶€ë¶„ í™•ì¸

![image.png](attachment:c6fb484f-2c08-4118-8883-943e03a54174:image.png)

### API JSON

```java
@WebServlet(name = "responseJsonServlet", urlPatterns = "/response-json")
public class ResponseJsonServlet extends HttpServlet {

    private ObjectMapper objectMapper = new ObjectMapper();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("application/json");
        response.setCharacterEncoding("utf-8");

        HelloData helloData = new HelloData();
        helloData.setUsername("kim");
        helloData.setAge(20);

        // {"username":"kim", "age":20}
        String result = objectMapper.writeValueAsString(helloData);
        response.getWriter().write(result);
    }
}
```

Content-Type: application/json;charset=utf-8

![image.png](attachment:fd2e115b-35d9-4f75-b160-add4311b0bb3:image.png)

- ì—¬ê¸°ì„œ `application/json` ë¡œë§Œ ë‚˜ì˜¤ê²Œ í•˜ë ¤ë©´ response.getWriter() ëŒ€ì‹  response.getOutputStream() ì“°ë©´ ëœë‹¤.

### íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸° - ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´

# íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸°

## íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ìš”êµ¬ì‚¬í•­

íšŒì› ì •ë³´

ì´ë¦„: username

ë‚˜ì´: age

ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

- íšŒì› ì €ì¥
- íšŒì› ì¡°íšŒ

member ë„ë©”ì¸ ëª¨ë¸

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•œ í•µì‹¬ ê°ì²´ë¥¼ ì •ì˜
- ì„œë¸”ë¦¿ì—ì„œëŠ” ê¸°ë³¸ ìƒì„±ìê°€ í•„ìš”í•˜ë‹¤.

```java
@Getter @Setter
public class Member {
    private Long id;
    private String username;
    private int age;

    // ê¸°ë³¸ ìƒì„±ì
    public Member() {

    }

    public Member(String username, int age) {
        this.username = username;
        this.age = age;
    }
}
```

íšŒì› ì €ì¥ì†Œ

- ì‹±ê¸€í†¤ íŒ¨í„´ ì ìš© (private ì²˜ë¦¬)
- new MemberRepository()  ë¶ˆê°€
    - MemberRepository.getInstance() ë¡œë§Œ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŒ.

```java
public class MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();
    private static long sequence = 0L;

    private static final MemberRepository instance = new MemberRepository();

    public static MemberRepository getInstance() {
        return instance;
    }

    private MemberRepository() {

    }

    public Member save(Member member) {
        member.setId(++sequence);
        store.put(member.getId(), member);
        return member;
    }

    public Member findById(Long id) {
        return store.get(id);
    }

    public List<Member> findAll() {
        // store ìì²´ì˜ ê°’ì„ ë³´í˜¸í•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ ArrayListë¥¼ ë§Œë“¤ì–´ì„œ ë³´ì—¬ì£¼ëŠ” ê²ƒ
        return new ArrayList<>(store.values());
    }

    // í…ŒìŠ¤íŠ¸ ìš© ìŠ¤í† ì–´ ê°’ ë‚ ë¦¬ê¸°
    public void clearStore() {
        store.clear();
    }
}
```

`í…ŒìŠ¤íŠ¸ ì½”ë“œ`

```java
class MemberRepositoryTest {
    MemberRepository memberRepository = MemberRepository.getInstance();

    @AfterEach
    void afterEach() {
        memberRepository.clearStore();
    }

    @Test
    void save() {
        Member member = new Member("hello", 20);

        Member savedMember = memberRepository.save(member);
        Member findMember = memberRepository.findById(savedMember.getId());
        assertThat(findMember).isEqualTo(savedMember);
    }

    @Test
    void findAll() {
        Member member1 = new Member("member1", 20);
        Member member2 = new Member("member2", 30);

        memberRepository.save(member1);
        memberRepository.save(member2);

        List<Member> result = memberRepository.findAll();

        assertThat(result.size()).isEqualTo(2);
        assertThat(result).contains(member1, member2);
    }
}
```

## ì„œë¸”ë¦¿

```java
@WebServlet(name = "memberFormServlet", urlPatterns = "/servlet/members/new-form")
public class MemberFormServlet extends HttpServlet {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");

        PrintWriter w = response.getWriter();
        w.write("<!DOCTYPE html>\n" +
                "<html>\n" +
                "<head>\n" +
                "    <meta charset=\"UTF-8\">\n" +
                "    <title>Title</title>\n" +
                "</head>\n" +
                "<body>\n" +
                "<form action=\"/servlet/members/save\" method=\"post\">\n" +
                "    username: <input type=\"text\" name=\"username\" />\n" +
                "    age:      <input type=\"text\" name=\"age\" />\n" +
                " <button type=\"submit\">ì „ì†¡</button>\n" + "</form>\n" +
                "</body>\n" +
                "</html>\n");
    }
}
```

ì•„ì§ ì €ì¥í•˜ëŠ” ë¶€ë¶„ì„ ë§Œë“¤ì§€ ì•Šì•˜ì§€ë§Œ ì‘ë‹µì€ text/html utf-8 ë„£ì€ ê±¸ë¡œ ì˜ ë“¤ì–´ê°„ë‹¤.

![image.png](attachment:0fb26feb-378b-469e-a11b-4b82c9f86027:image.png)

```java
@WebServlet(name = "memberSaveServlet", urlPatterns = "/servlet/members/save")
public class MemberSaveServlet extends HttpServlet {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("MemberSaveServlet.service");
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");

        PrintWriter w = response.getWriter();
        w.write("<html>\n" +
                "<head>\n" +
                " <meta charset=\"UTF-8\">\n" + "</head>\n" +
                "<body>\n" +
                "ì„±ê³µ\n" +
                "<ul>\n" +
                "    <li>id="+member.getId()+"</li>\n" +
                "    <li>username="+member.getUsername()+"</li>\n" +
                " <li>age="+member.getAge()+"</li>\n" + "</ul>\n" +
                "<a href=\"/index.html\">ë©”ì¸</a>\n" + "</body>\n" +
                "</html>");
    }
}
```

![image.png](attachment:cff66552-eb95-4ea3-b06f-9d710f46e628:image.png)

ì €ì¥ëœ ëª¨ë“  íšŒì›ì˜ ëª©ë¡ ì¡°íšŒ

```java
@WebServlet(name = "memberListServlet", urlPatterns = "/servlet/members")
public class MemberListServlet extends HttpServlet {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        List<Member> members = memberRepository.findAll();

        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");

        PrintWriter w = response.getWriter();
        w.write("<html>");
        w.write("<head>");
        w.write("    <meta charset=\"UTF-8\">");
        w.write("    <title>Title</title>");
        w.write("</head>");
        w.write("<body>");
        w.write("<a href=\"/index.html\">ë©”ì¸</a>");
        w.write("<table>");
        w.write("    <thead>");
        w.write("    <th>id</th>");
        w.write("   <th>username</th>");
        w.write("   <th>age</th>");
        w.write("   </thead>");
        w.write("   <tbody>");

        for (Member member : members) {
            w.write("   <tr>");
            w.write("       <td>" + member.getId() + "</td>");
            w.write("      <td>" + member.getUsername() + "</td>");
            w.write("      <td>" + member.getAge() + "</td>");
            w.write("  </tr>");
        }
        w.write("   </tbody>");
        w.write("</table>");
        w.write("</body>");
        w.write("</html>");
    }
}
```

ë™ì  htmlë¡œ í…Œì´ë¸”ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤Œ.

![image.png](attachment:5108ed7f-19be-4075-9124-16898f1305b0:image.png)

ê·¼ë°â€¦ ë„ˆë¬´ í˜ë“¤ë‹¤ javaì— html ì“°ëŠ” ê±°â€¦

<aside>
ğŸ’¡

**í…œí”Œë¦¿ ì—”ì§„** 

- htmlì— java ì½”ë“œë¥¼ ë„£ì–´ì„œ ë™ì  htmlë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” ê²ƒ.
- JSP, Thymeleaf, Freemarker, Velocity ë“±
</aside>

## JSP

ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€

```bash
	implementation 'org.apache.tomcat.embed:tomcat-embed-jasper'
	implementation 'jakarta.servlet:jakarta.servlet-api'
	implementation 'jakarta.servlet.jsp.jstl:jakarta.servlet.jsp.jstl-api'
	implementation 'org.glassfish.web:jakarta.servlet.jsp.jstl'
```

íšŒì›ê°€ì… ë¶€ë¶„

`main/webapp/jsp/members/new-form.jsp`

```html
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="hello.servlet.domain.member.MemberRepository" %>
<%@ page import="hello.servlet.domain.member.Member" %>
<%
        //request, response ì•ˆ ì¨ë†”ë„ ì‚¬ìš© ê°€ëŠ¥
        MemberRepository memberRepository = MemberRepository.getInstance();

        System.out.println("MemberSaveServlet.service");
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);
%>

<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
ì„±ê³µ
<ul>
    <li>id=<%=member.getId()%></li>
    <li>username=<%=member.getUsername()%></li>
    <li>age=<%=member.getAge()%></li>
</ul>
<a href="/index.html">ë©”ì¸</a>
</body>
</html>
```

http://localhost:8080/jsp/members/new-form.jsp .jsp ê¹Œì§€ë„ ì¨ì¤˜ì•¼ í•¨.

`<% ì—¬ê¸°ëŠ” java ì½”ë“œ ì…ë ¥ %>`

`<%= ì—¬ê¸°ëŠ” ìë°”ì½”ë“œ ì¶œë ¥ %>`

íšŒì› ì¡°íšŒ members.jsp

```html
<%@ page import="java.util.List" %>
 <%@ page import="hello.servlet.domain.member.MemberRepository" %>
 <%@ page import="hello.servlet.domain.member.Member" %>
 <%@ page contentType="text/html;charset=UTF-8" language="java" %>
 <%
     MemberRepository memberRepository = MemberRepository.getInstance();
     List<Member> members = memberRepository.findAll();
 %>
 <html>
 <head>
     <meta charset="UTF-8">
     <title>Title</title>
 </head>
<body>
<a href="/index.html">ë©”ì¸</a>
<table>
    <thead>
    <th>id</th>
    <th>username</th>
    <th>age</th>
    </thead>
    <tbody>
<%
    for (Member member : members) {
        out.write("     <tr>");
        out.write("         <td>" + member.getId() + "</td>");
        out.write("         <td>" + member.getUsername() + "</td>");
        out.write("         <td>" + member.getAge() + "</td>");
        out.write("     </tr>");
    }
%>
    </tbody>
</table>

</body>
</html>
```

ì„œë¸”ë¦¿ ì½”ë“œë¥¼ ì‚¬ìš©í–ˆê³ , ë‹¤ë¥¸ ì ì€ HTMLì„ ì¤‘ì‹¬ìœ¼ë¡œ í•˜ê³ , ìë°” ì½”ë“œë¥¼ ë¶€ë¶„ë¶€ë¶„ ì…ë ¥ í•œ ê²ƒ

### ì„œë¸”ë¦¿ê³¼ JSPì˜ í•œê³„

- ì„œë¸”ë¦¿ ì“¸ ë•Œ view(í™”ë©´)ì„ ìœ„í•œ HTML ì“¸ ë•Œ ë„ˆë¬´ í˜ë“¤ì—ˆë‹¤.
- JSPë¥¼ í–ˆëŠ”ë° HTML ì“°ëŠ” ê²ƒì€ ì¢‹ì•˜ìœ¼ë‚˜ ì¤‘ê°„ì¤‘ê°„ ë™ì ìœ¼ë¡œ ë³€ê²½ì´ í•„ìš”í•œ ë¶€ë¶„ì—ë§Œ ìë°” ì½”ë“œë¥¼ ì ìš©í–ˆë‹¤. ê·¸ë ‡ì§€ë§Œâ€¦ ì—¬ì „íˆ ë¶ˆí¸í•˜ë‹¤. (ë‚˜ì¤‘ì— ì½”ë“œ ê¸¸ì–´ì§€ë©´.. ìœ ì§€ë³´ìˆ˜ ì§€ì˜¥ ì°)

â‡’ **MVC íŒ¨í„´ì˜ ë“±ì¥**

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ì„œë¸”ë¦¿ ì²˜ëŸ¼ ë‹¤ë¥¸ê³³ì—ì„œ ì²˜ë¦¬í•˜ê³ , JSPëŠ” ëª©ì ì— ë§ê²Œ HTMLë¡œ í™”ë©´(View)ì„ ê·¸ë¦¬ëŠ” ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ MVC íŒ¨í„´ì´ ë“±ì¥í–ˆë‹¤.

# MVC íŒ¨í„´

## ê°œìš”

- MVC ì´ì „
    - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë·° ë Œë”ë§ê¹Œì§€ ë„ˆë¬´ ë§ì€ ì—­í• ì„ ë‹´ë‹¹í•´ì„œ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì› ë‹¤.
    - ë³€ê²½ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥¸ë° í•œ ì½”ë“œì— ìˆì—ˆë‹¤.
    - JSPëŠ” ë·° í…œí”Œë¦¿ì€ ë Œë”ë§ ê¸°ëŠ¥ì´ íŠ¹í™”ë¼ ìˆì—ˆë‹¤.
- **Model View Controller**
    - **ì»¨íŠ¸ë¡¤ëŸ¬**: HTTP ìš”ì²­ì„ ë°›ì•„ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•˜ê³ , **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰**í•œë‹¤. ê·¸ë¦¬ê³  ë·°ì— ì „ë‹¬í•  ê²°ê³¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì„œ ëª¨ë¸ì— ë‹´ëŠ”ë‹¤.
    - **ëª¨ë¸**: ë·°ì— ì¶œë ¥í•  ë°ì´í„°ë¥¼ ë‹´ì•„ë‘”ë‹¤. **ë·°ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ëª¨ë¸ì— ë‹´ì•„**ì„œ ì „ë‹¬í•´ì£¼ëŠ” ë•ë¶„ì— ë·°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ë°ì´í„° ì ‘ê·¼ì„ ëª°ë¼ë„ ë˜ê³ , í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ” ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.
    - **ë·°**: ëª¨ë¸ì— ë‹´ê²¨ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì„œ **í™”ë©´ì„ ê·¸ë¦¬ëŠ” ì¼ì— ì§‘ì¤‘**í•œë‹¤. ì—¬ê¸°ì„œëŠ” HTMLì„ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì„ ë§í•œë‹¤.

![image.png](attachment:44a7f6f6-d782-42be-abbb-54ab3d718b3e:image.png)

## ì ìš©

`request.setAttribute()`, `request.getAttribute()`

### íšŒì› ë“±ë¡

- ì»¨íŠ¸ë¡¤ëŸ¬ : ì„œë¸”ë¦¿
- ë·° : JSP
- ëª¨ë¸ : HttpServletRequest
    - request.setAttribute() - ë°ì´í„° ë³´ê´€
    - request.getAttribute() - ë°ì´í„° ì¡°íšŒ

**íšŒì› ë“±ë¡ í¼ - ì»¨íŠ¸ë¡¤ëŸ¬**

```java
@WebServlet(name = "mvcMemberFormServlet", urlPatterns = "/servlet-mvc/members/new-form")
public class MvcMemberFormServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/new-form.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·°ë¡œ ì´ë™í•  ë•Œ ì‚¬ìš©
        dispatcher.forward(request, response);
    }
}
```

- `dispatcher.forward()` : ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ (ì„œë²„ ë‚´ë¶€ì—ì„œ ë‹¤ì‹œ í˜¸ì¶œ ë°œìƒ)
- `WEB-INF` : ì™¸ë¶€ì—ì„œ JSP ë¥¼ ì§ì ‘ í˜¸ì¶œ í•˜ì§€ ì•Šê³ , ì»¨íŠ¸ë¡¤ëŸ¬(ì—¬ê¸°ì„œëŠ” ì„œë¸”ë¦¿)ë¥¼ í†µí•´ì„œ ë¶€ë¥´ê³  ì‹¶ì–´ì„œ ì‚¬ìš© (ë£° ê°™ì€ ê±°ë¼ì„œ WEB-INFì— ë„£ìœ¼ë©´ ì§ì ‘ ë¶ˆëŸ¬ì§€ì§€ ì•ŠìŒ)

<aside>
ğŸ’¡

**redirect vs forward**

- **redirect** : í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €)ì— ì‘ë‹µì´ ë‚˜ê°”ë‹¤ê°€, í´ë¼ì´ì–¸íŠ¸ê°€ redirect ê²½ë¡œë¡œ ë‹¤ì‹œ ìš”ì²­
    - í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•  ìˆ˜ ìˆê³ , URLë„ ì‹¤ì œë¡œ ë³€ê²½
- **forward :**  ì„œë²„ ë‚´ë¶€ì—ì„œ ì¼ì–´ë‚˜ëŠ” í˜¸ì¶œë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•˜ì§€ ëª»í•¨.
</aside>

**íšŒì› ë“±ë¡ í¼ - ë·°**

`/webapp/WEB-INF/views/new-form.jsp`

```java
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
 <html>
 <head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!-- ìƒëŒ€ê²½ë¡œ ì‚¬ìš©, [í˜„ì¬ URLì´ ì†í•œ ê³„ì¸µ ê²½ë¡œ + /save] -->
<form action="save" method="post">
    username: <input type="text" name="username" />
    age: <input type="text" name="age" />
<button type="submit">ì „ì†¡</button>
</form>
</body>
</html>
```

í˜„ì¬ ê³„ì¸µ ê²½ë¡œ: `/servlet-mvc/members/`

ê²°ê³¼: `/servlet-mvc/members/save`

ì ˆëŒ€ ê²½ë¡œë¼ë©´:`/setvlet-mvc/save`

- ì ˆëŒ€ ê²½ë¡œë¥¼ ê¶Œì¥í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ì¬ ì‚¬ìš©í•˜ë ¤ê³  ìƒëŒ€ê²½ë¡œë¥¼ ì‚¬ìš©í–ˆìŒ.

### íšŒì› ì €ì¥

**íšŒì› ì €ì¥ - ì»¨íŠ¸ë¡¤ëŸ¬**

```java
@WebServlet(name = "mvcMemberSaveServlet", urlPatterns = "/servlet-mvc/members/save")
public class MvcMemberSaveServlet extends HttpServlet {

    MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        // Modelì— ë°ì´í„° ë³´ê´€
        request.setAttribute("member", member);

        String viewPath = "/WEB-INF/views/save-result.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```

**íšŒì› ì €ì¥ - ë·°**

```java
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
ì„±ê³µ
<ul>
    <li>id=${member.id}</li>
    <li>username=${member.username}</li>
    <li>age=${member.age}</li>
</ul>
<a href="/index.html">ë©”ì¸</a>
</body>
</html>
```

- `<%=((Member)request.getAttribute("member")).getId()%>`  â†’  `${member.id}`
    - requestì˜ attributeì— ë‹´ê¸´ ë°ì´í„°ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ

![image.png](attachment:bb4715ac-6ea1-4648-953d-6f95eed45e45:image.png)

**íšŒì› ëª©ë¡ ì¡°íšŒ - ì»¨íŠ¸ë¡¤ëŸ¬**

```java
@WebServlet(name = "mvcMemberListServlet", urlPatterns = "/servlet-mvc/members")
public class MvcMemberListServlet extends HttpServlet {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        List<Member> members = memberRepository.findAll();

        request.setAttribute("members", members);

        String viewPath = "/WEB-INF/views/members.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```

**íšŒì› ëª©ë¡ ì¡°íšŒ - ë·°**

```java
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<a href="/index.html">ë©”ì¸</a>
<table>
    <thead>
    <th>id</th>
    <th>username</th>
    <th>age</th>
    </thead>
    <tbody>
    <c:forEach var="item" items="${members}">
        <tr>
            <td>${item.id}</td>
            <td>${item.username}</td>
            <td>${item.age}</td>
        </tr>
    </c:forEach>
    </tbody>
</table>

</body>
</html>
```

### í•œê³„

- ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì—­í• , ë·°ì˜ ë Œë”ë§ ì—­í• ì˜ êµ¬ë¶„ìœ¼ë¡œ ì•„ì£¼ ì¢‹ë‹¤.
- ê·¼ë°â€¦ ì½”ë“œ ì¤‘ë³µì´ ë§ë‹¤. í•„ìš”í•˜ì§€ ì•Šì€ ì½”ë“œê°€ ë§ë‹¤.

- **í¬ì›Œë“œ ì¤‘ë³µ**
    
    ```java
    RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
    dispatcher.forward(request, response);
    ```
    

- **ViewPath ì¤‘ë³µ**
    
    ```java
     String viewPath = "/WEB-INF/views/new-form.jsp";
    ```
    

- **ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ**
    
    ```java
    HttpServletRequest request, HttpServletResponse response
    ```
    

**â†’ ê³µí†µ ì²˜ë¦¬ì˜ ì–´ë ¤ì›€**

â‡’ ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ ì „ì— ê³µí†µ ê¸°ëŠ¥ì„ ì²˜ë¦¬ - **í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ì„ ë„ì…** - ìŠ¤í”„ë§ MVC í•µì‹¬ë„ ì—¬ê¸° ìˆë‹¤.

## CS

### ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œ ê³µê°„

- `ë¬¼ë¦¬ ì£¼ì†Œ`: ë©”ëª¨ë¦¬ í•˜ë“œì›¨ì–´ê°€ ì‚¬ìš©í•˜ëŠ” ì£¼ì†Œ
- `ë…¼ë¦¬ ì£¼ì†Œ`: CPUì™€ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ ì‚¬ìš©í•˜ëŠ” ì£¼ì†Œ
    - ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ ê°ê°ì—ê²Œ ë¶€ì—¬ëœ 0ë²ˆì§€ë¶€í„° ì‹œì‘ë˜ëŠ” ì£¼ì†Œ
- ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ì •ë³´ëŠ” ì‹œì‹œê°ê° ë³€í•˜ê¸° ë•Œë¬¸ì— CPUì™€ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì€ ë©”ëª¨ë¦¬ ëª‡ ë²ˆì§€ì— ë­ê°€ ì €ì¥ë˜ì–´ìˆëŠ”ì§€ ëª¨ë¥¸ë‹¤.
- `ë©”ëª¨ë¦¬ ê´€ë¦¬ ì¥ì¹˜(MMU)` : ë…¼ë¦¬ ì£¼ì†Œì™€ ë¬¼ë¦¬ ì£¼ì†Œ ê°„ ë³€í™˜ (CPUì™€ ì£¼ì†Œ ë²„ìŠ¤ ì‚¬ì´ ìœ„ì¹˜)
- ì˜ˆì‹œ ) `ë² ì´ìŠ¤ ë ˆì§€ìŠ¤í„°` 45000ì´ ì €ì¥ â†’ CPU ë…¼ë¦¬ ì£¼ì†Œê°€ 100 ë²ˆì§€ ë¼ë©´ ë¬¼ë¦¬ ì£¼ì†ŒëŠ” 45100ë²ˆì§€ë¡œ ë³€í™˜

**ë©”ëª¨ë¦¬ ë³´í˜¸ ê¸°ë²•**

- `í•œê³„ ë ˆì§€ìŠ¤í„°`
    - ë…¼ë¦¬ ì£¼ì†Œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ëª…ë ¹ì–´ ì‹¤í–‰ì„ ë°©ì§€
    - ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì´ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì— ì˜í–¥ì„ ë°›ì§€ ì•Šë„ë¡ ë³´í˜¸
    - ë…¼ë¦¬ ì£¼ì†Œì˜ ìµœëŒ€ í¬ê¸°ë¥¼ ì €ì¥
    - CPUê°€ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ê¸° ì „, ì ‘ê·¼í•˜ê³ ìí•˜ëŠ” ë…¼ë¦¬ ì£¼ì†Œê°€ í•œê³„ ë ˆì§€ìŠ¤í„°ë³´ë‹¤ ì‘ì€ì§€ ê²€ì‚¬
        - CPUê°€ í•œê³„ ë ˆì§€ìŠ¤í„°ë³´ë‹¤ ë†’ì€ ë…¼ë¦¬ ì£¼ì†Œì— ì ‘ê·¼í•˜ë ¤ê³  í•˜ë©´ **ì¸í„°ëŸ½íŠ¸(íŠ¸ë©)ì„ ë°œìƒ â†’ ì¤‘ë‹¨**

### ìºì‹œ ë©”ëª¨ë¦¬

**ì €ì¥ ì¥ì¹˜ ê³„ì¸µ êµ¬ì¡° memory hierarchy**

1. CPUì™€ ê°€ê¹Œìš´ ì €ì¥ì¥ì¹˜ëŠ” ë¹ ë¥´ê³ , ë©€ë¦¬ ìˆëŠ” ì €ì¥ì¥ì¹˜ëŠ” ëŠë¦¬ë‹¤.
2. ì†ë„ê°€ ë¹ ë¥¸ ì €ì¥ì¥ì¹˜ëŠ” ìš©ëŸ‰ì´ ì‘ê³ , ê°€ê²©ì´ ë¹„ì‹¸ë‹¤.
- ë ˆì§€ìŠ¤í„°, RAM(ë©”ëª¨ë¦¬), USB ë©”ëª¨ë¦¬ì˜ ë¹„êµ

| **ë ˆì§€ìŠ¤í„°** | ë¹ ë¦„ | ì‘ìŒ | ë¹„ìŒˆ |
| --- | --- | --- | --- |
| **ë©”ëª¨ë¦¬** | **ì†ë„** | **ìš©ëŸ‰** | **ê°€ê²©** |
| **ë³´ì¡°ê¸°ì–µì¥ì¹˜** | ëŠë¦¼ | í¼ | ì €ë ´í•¨ |

`ìºì‹œ ë©”ëª¨ë¦¬`

- CPUê°€ ë©”ëª¨ë¦¬ì— ì™”ë‹¤ ê°”ë‹¤ í•˜ëŠ” ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ë¯€ë¡œ, ë©”ëª¨ë¦¬ì—ì„œ CPUê°€ ì‚¬ìš©í•  ì¼ë¶€ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ìºì‹œ ë©”ëª¨ë¦¬ë¡œ ê°€ì§€ê³  ì™€ì„œ í™œìš©í•¨
- CPUì™€ ë©”ëª¨ë¦¬ ì‚¬ì´ì— ìˆë‹¤.

| ë ˆì§€ìŠ¤í„° |
| --- |
| ìºì‹œ ë©”ëª¨ë¦¬ |
| ë©”ëª¨ë¦¬ |
| ë³´ì¡°ê¸°ì–µì¥ì¹˜ |
- CPU ì½”ì–´ì™€ ê°€ê¹Œìš´ ìˆœì„œ ëŒ€ë¡œ L1 ìºì‹œ, L2 ìºì‹œ (ì½”ì–´ ë‚´ë¶€), L3 ìºì‹œ(ì½”ì–´ ì™¸ë¶€ - ì—¬ëŸ¬ ì½”ì–´ê°€ ê³µìœ )
- ë¶„ë¦¬í˜• ìºì‹œ ë„ ìˆë‹¤.
    - L1 - ëª…ë ¹ì–´ë§Œ ì €ì¥
    - L1D - ë°ì´í„°ë§Œ ì €ì¥

**ì°¸ì¡° ì§€ì—­ì„± ì›ë¦¬**

- ìºì‹œ ë©”ëª¨ë¦¬ëŠ” CPUê°€ ì‚¬ìš©í•  ë²•í•œ ëŒ€ìƒì„ ì˜ˆì¸¡í•˜ì—¬ ì €ì¥
- ì‹¤ì œë¡œ ì˜ˆì¸¡ì´ ë§ì•„ì„œ CPUê°€ ì‚¬ìš©í•  ê²½ìš° - `ìºì‹œ íˆíŠ¸`
- ì˜ˆì¸¡ì´ í‹€ë ¤ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ëŠ” ê²½ìš° - `ìºì‹œ ë¯¸ìŠ¤`

<aside>
ğŸ’¡

`ìºì‹œ ì ì¤‘ë¥ `

ìºì‹œ íˆíŠ¸ íšŸìˆ˜ / (ìºì‹œ íˆíŠ¸ íšŸìˆ˜ + ìºì‹œ ë¯¸ìŠ¤ íšŸìˆ˜)

</aside>

- ëŒ€ë¶€ë¶„ ì»´í“¨í„°ì˜ ìºì‹œ ì ì¤‘ë¥ ì€ 85~95%
- ì–´ë–»ê²Œ ì•„ëŠ”ê°€? = `ì°¸ì¡° ì§€ì—­ì„± ì›ë¦¬`
    1. CPUëŠ” ìµœê·¼ì— ì ‘ê·¼í–ˆë˜ ë©”ëª¨ë¦¬ ê³µê°„ì— ë‹¤ì‹œ ì ‘ê·¼í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆë‹¤. = `ì‹œê°„ ì§€ì—­ì„±`
    2. CPUëŠ” ì ‘ê·¼í•œ ë©”ëª¨ë¦¬ ê³µê°„ ê·¼ì²˜ë¥¼ ì ‘ê·¼í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆë‹¤. = `ê³µê°„ ì§€ì—­ì„±`

## ìŠ¤í”„ë§ ì…ë¬¸ ë¯¸ì…˜

## 1. ê°„ë‹¨í•œ ì›¹ í˜ì´ì§€ì™€ REST API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

ê¸°ë³¸ ì›¹ í˜ì´ì§€ë¥¼ ì„¤ì •í•˜ê³  @RestControllerë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ REST API ì—”ë“œí¬ì¸íŠ¸ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, â€œHello, Worldâ€ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ” APIë¥¼ ë§Œë“­ë‹ˆë‹¤. ì—”ë“œí¬ì¸íŠ¸ ì‹¤í–‰ ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ· ë° ì½”ë“œë¥¼ ê²°ê³¼ë¬¼ë¡œ ì œì¶œí•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì›¹ í˜ì´ì§€ ì„¤ì •

`main/resources/templates/index.html`

```html
<html>
<body>
    <h1>EXP [ë°±ì—”ë“œ] ìŠ¤í”„ë§ ì…ë¬¸</h1>
</body>
</html>
```

![image.png](attachment:2fb1b661-f483-4f7b-a341-4f4b1f475cff:image.png)

### ê°„ë‹¨í•œ REST API ì—”ë“œí¬ì¸íŠ¸ë¥¼ êµ¬í˜„

â€œHello, Worldâ€ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ” API

`main/java/grm/spring/basic/controller/RestPraticeController`

```java
package grm.spring.basic.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api")
public class RestPracticeController {

    @GetMapping("/hello")
    public String Hello() {
        return "Hello, World";
    }
}
```

![image.png](attachment:9a7fc056-fab2-4127-9e76-e5fbdef4c040:image.png)

<aside>
ğŸ’¡

**@Controller vs @RestController ì°¨ì´**

1. **@Controller**
    - HTML í˜ì´ì§€ë¥¼ ë°˜í™˜í•  ë•Œ ì‚¬ìš© (Thymeleaf ê°™ì€ í…œí”Œë¦¿ ì—”ì§„ê³¼ í•¨ê»˜ ì‚¬ìš©)
    - @ResponseBody ì—†ì´ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ë©´ **ë·° ì´ë¦„**ìœ¼ë¡œ ì²˜ë¦¬ë¨
    - REST API ì‘ë‹µì„ í•˜ë ¤ë©´ @ResponseBodyë¥¼ ë¶™ì—¬ì•¼ í•¨
2. **@RestController**
    - JSON ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ (REST APIìš©)
    - ë‚´ë¶€ì ìœ¼ë¡œ @Controller + @ResponseBodyê°€ í•©ì³ì§„ ê°œë…ì´ë¼ì„œ, ë”°ë¡œ @ResponseBodyë¥¼ ì•ˆ ë¶™ì—¬ë„ ë¨
    - ê¸°ë³¸ì ìœ¼ë¡œ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ë©´ **ê·¸ëŒ€ë¡œ ì‘ë‹µ ë°”ë””ì— ì¶œë ¥ë¨**
</aside>

## 2. MVC íŒ¨í„´ì˜ ì´í•´ì™€ ê¸°ë³¸ êµ¬ì¡° ì„¤ê³„

ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œì˜ MVC íŒ¨í„´ì„ ì´í•´í•˜ê³  Controller, Service, Repository ê³„ì¸µì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ êµ¬ì¡°ë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê°€ìƒì˜ **íšŒì› ì •ë³´ë¥¼ ì²˜ë¦¬**í•˜ëŠ” êµ¬ì¡°ë¥¼ êµ¬í˜„í•´ ë´…ë‹ˆë‹¤. ê¸°ë³¸ MVC êµ¬ì¡° íŒŒì¼ ë° ê³„ì¸µ ì„¤ëª…ì„ PDF ë¬¸ì„œë¡œ ë§Œë“¤ì–´ ê²°ê³¼ë¬¼ë¡œ ì œì¶œí•©ë‹ˆë‹¤.

src/main/java/grm/spring/basic/

- controller - í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ì•„ì„œ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µì„ ë°˜í™˜
    - MemberController.java - íšŒì› ë“±ë¡ API, ëª¨ë“  íšŒì› ëª©ë¡ ì¡°íšŒ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- service - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬ ë°ì´í„°ë¥¼ ê´€ë¦¬
    - MemberService.java - íšŒì› ì €ì¥, ì¡°íšŒ ê¸°ëŠ¥
- repository - ë°ì´í„°ë¥¼ ì €ì¥, ì¡°íšŒí•˜ëŠ” ì—­í• (ì´í›„ DB ì—°ë™)
    - MemberRepository.java - íšŒì› ì •ë³´ ì €ì¥ í´ë˜ìŠ¤
- domain(model) - ë°ì´í„°ë¥¼ ë‹´ëŠ” ê°ì²´
    - Member.java - id, username ë“± í•„ë“œ í´ë˜ìŠ¤

![image.png](attachment:9057b871-5aa2-4b7f-b6d1-4392380044df:image.png)

## 3. ì˜ì¡´ì„± ì£¼ì…(DI) ì´í•´í•˜ê¸°

ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ì„ í•™ìŠµí•˜ê³ , @Autowiredì™€ @Component ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ DIë¥¼ êµ¬í˜„í•´ ë´…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì˜ì¡´ì„± ì£¼ì…ì„ í™œìš©í•´ **ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê°„ì˜ ì˜ì¡´ì„±ì„ ì„¤ì •**í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì… ì½”ë“œ ë° ìŠ¤í¬ë¦°ìƒ·ì„ ê²°ê³¼ë¬¼ë¡œ ì œì¶œí•©ë‹ˆë‹¤.

- íšŒì› ê°€ì…ì‹œ ì½˜ì†” ì•Œë¦¼ ê¸°ëŠ¥ í˜¸ì¶œ
    - MemberServiceê°€ NotificationServiceì˜ ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•´ ì‚¬ìš©

- **ì½”ë“œ êµ¬í˜„**
    
    `service/MemberService.java`
    
    - ë ˆí¬ì§€í† ë¦¬ ì—†ì´ Listì— ì¶”ê°€
    - ìƒì„±ì ì£¼ì… - í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ newë¡œ ê°ì²´ ë§Œë“¤ì–´ì„œ ì£¼ì…í•  ì˜ˆì •
    
    ```java
    package grm.spring.basic.service;
    
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Component;
    
    import java.util.ArrayList;
    import java.util.List;
    
    @Component
    public class MemberService {
        private List<String> members = new ArrayList<>();
        private NotificationService notificationService;
    
        @Autowired
        public MemberService(NotificationService notificationService) {
            this.notificationService = notificationService;
        }
    
        public void save(String username) {
            members.add(username);
            notificationService.sendNotification(username);
        }
    
        public List<String> findAll() {
            return members;
        }
    }
    
    ```
    
    `service/NotificationService.java`
    
    - ì½˜ì†”ì— í”„ë¦°íŠ¸í•´ì„œ ì•Œë¦¼
    
    ```java
    package grm.spring.basic.service;
    
    import org.springframework.stereotype.Component;
    
    @Component
    public class NotificationService {
        public void sendNotification(String username) {
            System.out.println(username + "ë‹˜ íšŒì›ê°€ì… ì™„ë£Œ");
        }
    }
    ```
    

`test/java/â€¦/service/MemberServiceTest`

```java
package grm.spring.basic.service;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;

import static org.junit.jupiter.api.Assertions.*;

class MemberServiceTest {

    MemberService memberService;

    @BeforeEach
    void setUp() {
        memberService = new MemberService(new NotificationService());
    }

    @Test
    public void testMemberJoin() {
        // Given
        String username = "kim";

        // When
        memberService.save(username);

        // Then
        Assertions.assertThat(memberService.findAll()).contains(username);
        System.out.println("í…ŒìŠ¤íŠ¸ ì™„ë£Œ");
    }
}
```

- **í…ŒìŠ¤íŠ¸ ê²°ê³¼**
    
    ![image.png](attachment:c301844d-2229-42b4-a48e-20a8e5284069:image.png)
    