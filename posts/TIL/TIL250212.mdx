---
title: "TIL 250212"
description: "ìŠ¤í”„ë§ ê°•ì˜, ì•Œê³ ë¦¬ì¦˜ 3ë¬¸ì œ, ìŠ¤í”„ë§ exp ì…ë¬¸ ì™„ë£Œ"
filter: "ğŸ§£2025.02"
---

# What I did

ìŠ¤í”„ë§ ê°•ì˜, ì•Œê³ ë¦¬ì¦˜ 3ë¬¸ì œ, ìŠ¤í”„ë§ exp ì…ë¬¸ ì™„ë£Œ

# ë°°ìš´ì 

## ìŠ¤í”„ë§ ê°•ì˜

í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸° v3ê¹Œì§€ëŠ” ì–´ì°Œ ì €ì°Œ ë”°ë¼ê°”ëŠ”ë°.. v4, v5 ë¶€í„°ëŠ” ë„ˆë¬´ ì§‘ì¤‘ì´ ì•ˆëë‹¤. ìŠ¤í”„ë§ì´ ì‹«ì–´ì§ˆ ì •ë„â€¦

## ì•Œê³ ë¦¬ì¦˜

10818, 1152, 2577

- ìµœì†Œ ê°’, ìµœëŒ€ê°’ì´ ë¬¸ì œì— ì •í•´ì ¸ìˆìœ¼ë‹ˆ ê·¸ ê°’ì„ ë„£ìœ¼ë©´ í•´ê²°ë¨. â†’ ë•ë¶„ì— ifë„ ëº„ ìˆ˜ ìˆìŒ. (ì½”ë“œ ê°„ì†Œí™”)
- `StringTokenizer`
    - `.countTokens()` - í† í° ê°¯ìˆ˜ ì„¸ê¸°
    - `.hasMoreTokens()` - while ë¬¸ ì“¸ ë•Œ ì¢‹ì„ ë“¯
    - `.nextToken()` - ë‹¤ìŒ í† í° ë°›ëŠ” ê±°
- í–¥ìƒëœ for ë¬¸ìœ¼ë¡œ ìˆ˜ì •
    
    ```java
    for (int j = 0; j < abc_arr.length; j++) {
          int result = Integer.parseInt(abc_arr[j]);
          ...
    ```
    
    ```java
    for (String s : abc_arr) {
          int result = Integer.parseInt(s);
          ...
    ```
    

## ìŠ¤í”„ë§ ì…ë¬¸ EXP

### 4. JPAì™€ ìŠ¤í”„ë§ ë°ì´í„°ì˜ ê¸°ë³¸ CRUD êµ¬í˜„

ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê³ , íšŒì› ì •ë³´ë¥¼ ì €ì¥, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•˜ëŠ” CRUD ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤. CRUD ê¸°ëŠ¥ì´ êµ¬í˜„ëœ ì½”ë“œ ë° ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í¬ë¦°ìƒ·ì„ ê²°ê³¼ë¬¼ë¡œ ì œì¶œí•©ë‹ˆë‹¤.

1. JPA, H2 DB ì˜ì¡´ì„± ì¶”ê°€
    
    ```java
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    runtimeOnly 'com.h2database:h2'
    ```
    
2. member entity
    
    `/domain/Member.java`
    
    ```java
    package grm.spring.basic.domain;
    
    import jakarta.persistence.Entity;
    import jakarta.persistence.GeneratedValue;
    import jakarta.persistence.GenerationType;
    import jakarta.persistence.Id;
    
    @Entity
    public class Member {
        
        @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
        private Long id;
        private String username;
    
        public Long getId() {
            return id;
        }
    
        public void setId(Long id) {
            this.id = id;
        }
    
        public String getUsername() {
            return username;
        }
    
        public void setUsername(String username) {
            this.username = username;
        }
    }
    ```
    
    - @Entity : DB í…Œì´ë¸”ê³¼ ì—°ê²°
    - @GeneratedValue(strategy = GenerationType.IDENTITY) : ID ìë™ ì¦ê°€
3. MemberRepository ë§Œë“¤ê¸°(JPA í™œìš©)
    
    ```java
    package grm.spring.basic.repository;
    
    import grm.spring.basic.domain.Member;
    import org.springframework.data.jpa.repository.JpaRepository;
    import org.springframework.stereotype.Repository;
    
    @Repository
    public interface MemberRepository extends JpaRepository<Member, Long> {
    }
    ```
    
    **ìë™ ì œê³µë˜ëŠ” ë©”ì„œë“œë“¤**
    
    - save(Member member) : íšŒì› ì €ì¥ , findById í›„ save í•˜ë©´ ìë™ìœ¼ë¡œ updateë¡œ ë°›ì•„ë“¤ì„.
    - findById(Long id) : íŠ¹ì • íšŒì› ì¡°íšŒ
    - findAll() : ëª¨ë“  íšŒì› ì¡°íšŒ
    - deleteById(Long id) : íŠ¹ì • íšŒì› ì‚­ì œ
4. MemberService êµ¬í˜„(CRUD ê¸°ëŠ¥)
    
    ```java
    package grm.spring.basic.service;
    
    import grm.spring.basic.domain.Member;
    import grm.spring.basic.repository.MemberRepository;
    
    import java.util.List;
    
    @Service
    public class MemberService {
        private final MemberRepository memberRepository;
    
        public MemberService(MemberRepository memberRepository) {
            this.memberRepository = memberRepository;
        }
    
        // Create
        public Long join(Member member) {
            memberRepository.save(member);
            return member.getId();
        }
    
        // Read
        public List<Member> findAll() {
            return memberRepository.findAll();
        }
    
        // Update
        public Member update(Long id, String newUsername) {
            Member member = memberRepository.findById(id)
                    .orElseThrow(() -> new IllegalArgumentException("í•´ë‹¹ íšŒì› ì—†ìŒ: " + id));
            member.setUsername(newUsername);
            return memberRepository.save(member);
        }
    
        // Delete
        public void delete(Long id) {
            memberRepository.deleteById(id);
        }
    
    }
    
    ```
    
    - `.orElseThrow(() -> new IllegalArgumentException("í•´ë‹¹ íšŒì› ì—†ìŒ: " + id));` ì´ ì˜ˆì™¸ì²˜ë¦¬ ì•ˆí•˜ë©´ ì•„ë˜ ì—ëŸ¬ê°€ ëœ¸.
        
        ```java
        Incompatible types. Found: 'java.util.Optional<grm.spring.basic.domain.Member>', required: 'grm.spring.basic.domain.Memberâ€™ 
        ```
        
    
5. ì»¨íŠ¸ë¡¤ëŸ¬ 
    
    ```java
    package grm.spring.basic.controller;
    
    import grm.spring.basic.domain.Member;
    import grm.spring.basic.service.MemberService;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.*;
    
    import java.util.List;
    
    @Controller
    public class MemberController {
        private final MemberService memberService;
    
        @Autowired
        public MemberController(MemberService memberService) {
            this.memberService = memberService;
        }
    
        // Create
        @GetMapping("members/new")
        public String createForm() {
            return "members/createMemberForm";
        }
    
        @PostMapping("/members/new")
        public String create(MemberForm form) {
            Member member = new Member();
            member.setUsername(form.getUsername());
    
            memberService.join(member);
    
            return "redirect:/members";
        }
    
        // Read
        @GetMapping("/members")
        public List<Member> getAllMembers() {
            return  memberService.findAll();
        }
    
        // Update
        @PutMapping("/{id}")
        public Member updateMember(@PathVariable Long id, @RequestParam String username) {
            return memberService.update(id, username);
        }
    
        // Delete
        @DeleteMapping("/{id}")
        public void deleteMember(@PathVariable Long id) {
            memberService.delete(id);
        }
        
        // Testë¥¼ ìœ„í•´ ì‘ì„±
        public Optional<Member> findOne(Long memberId) {
            return memberRepository.findById(memberId);
        }
    }
    
    ```
    
6. DB ì—°ê²°
    
    ì €ì¥ ëª¨ë“œë¼ì„œ h2 ì„œë²„ ë¨¼ì € ì—´ê³ (í„°ë¯¸ë„ë¡œ ì˜¤í”ˆ) ìŠ¤í”„ë§ ì‹¤í–‰
    
    `SELECT * FROM MEMBER` ë¡œ DB ì—°ê²° í™•ì¸
    
	![Image](https://github-production-user-asset-6210df.s3.amazonaws.com/132262934/412037938-98da62fa-a40e-4854-81cb-388a4597610e.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20250211%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250211T153428Z&X-Amz-Expires=300&X-Amz-Signature=6893c1f0ffa42cbf34d0be08fc49a9a6a980db5128c2415b460e1d3934ae80b5&X-Amz-SignedHeaders=host)

	![Image](https://github-production-user-asset-6210df.s3.amazonaws.com/132262934/412037992-22eb5154-d951-481c-8ed2-3cbb33ccfd0c.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20250211%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250211T153444Z&X-Amz-Expires=300&X-Amz-Signature=826f3d2b0f111c3b3afbcacbc73e9791a257e7066046b29bd468485bf8d52273&X-Amz-SignedHeaders=host)
    
7. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
    
    ```java
    package grm.spring.basic.service;
    
    import grm.spring.basic.domain.Member;
    import grm.spring.basic.repository.MemberRepository;
    import org.assertj.core.api.Assertions;
    import org.junit.jupiter.api.BeforeEach;
    import org.junit.jupiter.api.Test;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.boot.test.context.SpringBootTest;
    import org.springframework.transaction.annotation.Transactional;
    
    import java.util.List;
    
    import static org.assertj.core.api.Assertions.assertThat;
    
    @SpringBootTest
    @Transactional
    class MemberServiceTest {
    
        @Autowired
        private MemberService memberService;
    
        @Autowired
        private MemberRepository memberRepository;
    
        @Test
        public void testMemberJoin() {
            // Given
            Member member = new Member();
            member.setUsername("Mag :)");
    
            // When
            Long saveId = memberService.join(member);
    
            // Then
            Member findMember = memberService.findOne(savedId).get();
            assertThat(member.getUsername()).isEqualTo(findMember.getUsername());
            System.out.println("íšŒì› ì €ì¥ í…ŒìŠ¤íŠ¸");
        }
    
        @Test
        public void testMemberUpdate() {
            // Given
            Member member = new Member();
            member.setUsername("Kim");
    
            // When
            Long savedId = memberService.join(member);
            String newUsername = "Update Kim";
            memberService.update(savedId, newUsername);
    
            // Then
            Member updatedMember = memberRepository.findById(savedId).get();
            assertThat(updatedMember.getUsername()).isEqualTo(newUsername);
            System.out.println("íšŒì› ìˆ˜ì • í…ŒìŠ¤íŠ¸");
        }
    
        @Test
        public void testMemberDelete() {
            // Given
            Member member = new Member();
            member.setUsername("Na");
    
            // When
            Long savedId = memberService.join(member);
            memberService.delete(savedId);
    
            // Then
            List<Member> members = memberRepository.findAll();
            assertThat(members).doesNotContain(member);
            System.out.println("íšŒì› ì‚­ì œ í…ŒìŠ¤íŠ¸");
        }
    }
    ```
    8. í…ŒìŠ¤íŠ¸ ê²°ê³¼
    
    ![Image](https://github-production-user-asset-6210df.s3.amazonaws.com/132262934/412038024-b700303b-b503-4ce4-896b-eec6fac57e69.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20250211%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250211T153359Z&X-Amz-Expires=300&X-Amz-Signature=978b88f03da676be7c7cb555f5d7c4f0a8c6d6db1284a8e1cdd269807aa94f49&X-Amz-SignedHeaders=host)
    

### 5. íŠ¸ëœì­ì…˜ ê´€ë¦¬ ì„¤ì •í•˜ê¸°

ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œì˜ íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¥¼ ì´í•´í•˜ê³  @Transactional ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì €ì¥ ì‹œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•´ ë´…ë‹ˆë‹¤. ì—ëŸ¬ ë°œìƒ ì‹œ ë¡¤ë°±ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.  íŠ¸ëœì­ì…˜ í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ ë¡¤ë°± ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ·ì„ ê²°ê³¼ë¬¼ë¡œ ì œì¶œí•©ë‹ˆë‹¤.

1. MemberSeriveì— join ë¶€ë¶„ì— ì• ë…¸í…Œì´ì…˜ ì¶”ê°€ ë° ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
    
    ```java
        // Create
        @Transactional
        public Long join(Member member) {
            if (member.getUsername().isEmpty()) {
                throw new IllegalArgumentException("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }
            memberRepository.save(member);
            return member.getId();
        }
    ```
    
2. í…ŒìŠ¤íŠ¸ ì½”ë“œ
    
    ```java
        @Test
        public void testTransactional() {
            Member member = new Member();
            member.setUsername("");
    
            try {
                memberService.join(member);
            } catch (IllegalArgumentException e) {
                assertThat(e.getMessage()).isEqualTo("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }
            
        }
    ```
    
3. ê²°ê³¼
    
    ![Image](https://github-production-user-asset-6210df.s3.amazonaws.com/132262934/412038074-837df18e-5e29-4086-9560-43402665f48c.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20250211%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250211T153319Z&X-Amz-Expires=300&X-Amz-Signature=60cab21417b908dea006c60c61f0fab372a7ea89728472cf0bc754a935a10d22&X-Amz-SignedHeaders=host)
    

### 6. AOP ì ìš©í•˜ì—¬ ë¡œê¹… ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°

AOP ê°œë…ì„ ì´í•´í•˜ê³  @Aspectì™€ @Aroundë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê¹… ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë©”ì„œë“œ ì‹¤í–‰ ì „í›„ì— ì‹¤í–‰ ì‹œê°„ì„ ê¸°ë¡í•©ë‹ˆë‹¤. ë¡œê¹…ì´ ì ìš©ëœ AOP ì½”ë“œ ë° ì‹¤í–‰ ë¡œê·¸ ìŠ¤í¬ë¦°ìƒ·ì„ ê²°ê³¼ë¬¼ë¡œ ì œì¶œí•©ë‹ˆë‹¤.

1. AOP dependency ì¶”ê°€
    
    ```java
    implementation 'org.springframework.boot:spring-boot-starter-aop'
    ```
    
2. ì½”ë“œ
    
    ```java
    package grm.spring.basic.aop;
    
    import org.aspectj.lang.ProceedingJoinPoint;
    import org.aspectj.lang.annotation.Around;
    import org.aspectj.lang.annotation.Aspect;
    import org.springframework.stereotype.Component;
    
    @Aspect
    @Component
    public class TimeTraceAop {
    
        @Around("execution(* grm.spring.basic..*(..))")
        public Object execute(ProceedingJoinPoint joinPoint) throws Throwable {
            long start = System.currentTimeMillis();
            System.out.println("START: " + joinPoint.toString());
            try {
                return joinPoint.proceed();
            } finally {
                long finish = System.currentTimeMillis();
                long timeMs = finish - start;
                System.out.println("END: " + joinPoint.toString() + " " + timeMs + "ms");
            }
        }
    }
    ```
    
3. ê²°ê³¼
	![Image](https://github-production-user-asset-6210df.s3.amazonaws.com/132262934/412039544-86fe4efa-8b15-4f45-b61a-c96837b8809c.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20250211%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250211T153220Z&X-Amz-Expires=300&X-Amz-Signature=1bbbfcd4c5ec6b1c1d03b1a1bbe332e1c93993c32dd8da197145cd5a8dbb86ca&X-Amz-SignedHeaders=host)

ë.