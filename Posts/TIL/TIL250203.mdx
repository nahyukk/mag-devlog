---
title: "TIL 250203"
description: "ìŠ¤í”„ë§ ê°•ì˜(ê°ì²´ì§€í–¥ ì›ë¦¬ ì ìš©, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ, ìŠ¤í”„ë§ ë¹ˆ), CS-ë¹ ë¥¸ CPUë¥¼ ìœ„í•œ ì„¤ê³„ ê¸°ë²•, í”„ë¡œì íŠ¸ - ìš”êµ¬ì‚¬í•­ ì •ë¦¬ ë° ERD ì‘ì„±"
filter: "ğŸ§£2025.02"
---

# What I did

ìŠ¤í”„ë§ ê°•ì˜ ë“£ê¸° - ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ, 

CS - ë¹ ë¥¸ CPUë¥¼ ìœ„í•œ ì„¤ê³„ ê¸°ë²•

í”„ë¡œì íŠ¸ - ìš”êµ¬ì‚¬í•­ ì •ë¦¬ ë° ERD ì‘ì„±

# ë°°ìš´ì 

## ìŠ¤í”„ë§ ê°•ì˜

## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

- í• ì¸ ì •ì±…ì„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©
    - OrderServiceImpl ì½”ë“œì—ì„œ FixDiscount â†’ RateDiscount ë¡œ ë³€ê²½
        
        ```jsx
        public class OrderServiceImpl implements OrderService{
        
            private final MemberRepository memberRepository = new MemoryMemberRepository();
        //    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
            private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
        ```
        
- ë¬¸ì œì  ë°œê²¬
    - ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬
    - ë‹¤í˜•ì„± í™œìš©, ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ ë¶„ë¦¬
    - OCP, DIP ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ ì¤€ìˆ˜? - ê·¸ë ‡ê²Œ ë³´ì´ì§€ë§Œ ì•„ë‹ˆë‹¤ ã… ã… 
    - DIP â†’ ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸(`OrderServiceImpl`)ê°€ ì¶”ìƒì— ì˜ì¡´í•˜ê³  ìˆë‹¤. ê·¼ë° êµ¬í˜„ì—ë„ ì˜ì¡´í•˜ê³  ìˆìŒ.
        
        ```java
        //    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
            private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
        ```
        
        - ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) `DiscountPolicy`
        - êµ¬ì²´(êµ¬í˜„) `FixDiscountPolicy`, `RateDiscountPolicy`
        - **DIP ìœ„ë°˜**
    - OCP
        - `FixDiscountPolicy` ë¥¼ `RateDiscountPolicy` ë¡œ ë°”ê¾¸ëŠ” ìˆœê°„ `OrderServiceImpl` ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.
        - **OCP ìœ„ë°˜**

â‡’ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œ ë³€ê²½

```jsx
private DiscountPolicy discountPolicy;
```

ì´ëŒ€ë¡œ testë¥¼ ëŒë ¤ë³´ë©´ NullPointerException ì´ í„°ì§„ë‹¤.

- í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ discountPolicy ë¶€ë¶„ì— ì•„ë¬´ ê°’ì´ í• ë‹¹ ë˜ì§€ ì•Šì•„ì„œ Nullì´ ëœ ê²ƒ.

```java
int discountPrice = discountPolicy.discount(member, itemPrice);
```

## ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

- OrderServiceImlpëŠ” ì˜¤ë” ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë¡œì§ë§Œ ì‹ ê²½ì¨ì•¼ í•˜ëŠ”ë° ë‚˜ëŠ” FixDiscountPolicyë¡œ í•´ì•¼í•´ í•˜ê³  ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì²´ì ì¸ ì„ íƒë„ í•˜ê²Œ ë˜ì–´ë²„ë¦° ê²ƒ â†’ **ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬ í•´ì•¼ í•œë‹¤.**

```java
private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
```

### AppConfig

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config, ë˜ëŠ” ì„¤ì •)í•˜ê¸° ìœ„í•´ì„œ, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³  **ì—°ê²°**í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ ë³„ë„ì˜ `ì„¤ì • í´ë˜ìŠ¤`
- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í™˜ê²½ ì„¤ì •ì„ ë‹¤ í•˜ëŠ” í´ë˜ìŠ¤
- ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**
    - `MemberServiceImlp`
    - `MemoryMemberRepository`
    - `OrderServiceImpl`
    - `FixDiscountPolicy`
- ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ **ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)**
    - `MemberServiceImlp` â†’ `MemoryMemberRepository`
    - `OrderServiceImpl` â†’ `MemoryMemberRepository` , `FixDiscountPolicy`

**`MemberServiceImlp`** ìˆ˜ì •

- memberRepository ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬ í•¨.

```java
private final MemberRepository memberRepository;

public MemberServiceImlp(MemberRepository memberRepository) {
    this.memberRepository = memberRepository;
}
    ...
```

**`hello.core / AppConfig.class`**

- `MemoryMemberRepository()`ê°€ ìƒì„±ìë¥¼ í†µí•´ì„œ ë“¤ì–´ê°€ê²Œ í•¨ â†’ ìƒì„±ì ì£¼ì…

```java
public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImlp(new MemoryMemberRepository());
    }

}
```

**`OrderServiceImlp`** ë„ ë˜‘ê°™ì´ ìˆ˜ì •

```java
private MemberRepository memberRepository;
private DiscountPolicy discountPolicy;

public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
    this.memberRepository = memberRepository;
    this.discountPolicy = discountPolicy;
}
```

**`hello.core / AppConfig.class`**

- ìƒì„±ì ì£¼ì…: `MemoryMemberRepository()`, `FixDiscountPolicy()`

```java
public OrderService orderService() {
    return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
}
```

â†’ DIPë¥¼ ì˜ ì§€í‚¤ê²Œ ëœë‹¤.

- `MemberServiceImpl`ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(`AppConfig` )ì—ì„œ ê²°ì •
- `MemberServiceImpl` ëŠ” ì˜ì¡´ê´€ê³„ ê³ ë¯¼ì€ í•˜ì§€ ì•Šê³ , ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘

<aside>
ğŸ’¡

```java
public MemberService memberService() {
    return new MemberServiceImlp(new MemoryMemberRepository());
}
```

- memberService()ëŠ” ë©”ì„œë“œ
- MemberServiceImlp ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ
- MemoryMemberRepository ê°ì²´ë¥¼ ìƒì„±ì ì˜ì¡´ê´€ê³„ ì£¼ì…ìœ¼ë¡œ ì „ë‹¬
- ë¦¬í„´ â†’ ìƒˆë¡œ ìƒì„±í•œ MemberServiceImlp ê°ì²´ë¥¼ ë°˜í™˜
</aside>

### AppConfig ì‹¤í–‰

**`MemberApp`**

**ë³€ê²½ ì „**

```java
public class MemberApp {
    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImlp();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("findMember = " + member.getName());
    }
}
```

**ë³€ê²½ í›„**

```java
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);
```

`OrderApp` ë„ ìˆ˜ì •

```java
AppConfig appConfig = new AppConfig();
MemberService memberService = appConfig.memberService();
OrderService orderService = appConfig.orderService();
```

â‡’ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê²Œ ë¨.

Test ì½”ë“œë„ ìˆ˜ì •

- `MemberServiceTest` ì—ì„œ ì´ ë¶€ë¶„ì´ ì˜¤ë¥˜ê°€ ë‚˜ê³  ìˆìŒ
    
    ```java
    MemberService memberService = new MemberServiceImlp();
    ```
    
    ```java
    MemberService memberService;
    
    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }
    ```
    

- OrderServiceTest ë™ì¼
    
    ```java
    		MemberService memberService = new MemberServiceImlp();
    		OrderService orderService = new OrderServiceImpl();
    ```
    
    ```java
        MemberService memberService;
        OrderService orderService;
    
        @BeforeEach
        public void beforeEach() {
            AppConfig appConfig = new AppConfig();
            memberService = appConfig.memberService();
            orderService = appConfig.orderService();
        }
    ```
    

### ì •ë¦¬

- `AppConfig`ë¥¼ í†µí•´ ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬
    - ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í• ì§€ ì „ì²´ êµ¬ì„±ì„ ì±…ì„
- ê° êµ¬ì²´(`imlp`ë“¤)ëŠ” ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.
    - êµ¬í˜„ ê°ì²´ì— newê°€ ì—†ë‹¤ëŠ” ëœ».

## AppConfig ë¦¬íŒ©í† ë§

- í˜„ì¬ **ì¤‘ë³µ**ì´ ìˆê³ , **ì—­í• **ì— ë”°ë¥¸ **êµ¬í˜„**ì´ ì˜ ì•ˆë³´ì¸ë‹¤.

![image.png](attachment:14c296b4-46ff-4e4f-be2a-592c45a15c70:image.png)

- ì½”ë“œì—ì„œ ì´ ê·¸ë¦¼ì´ ì˜ ë³´ì—¬ì•¼ í•¨.

**ìˆ˜ì • ì „**

```java
public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImlp(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }

}
```

cmd + opt + M

**new MemoryMemberRepository()** â†’ 

![image.png](attachment:880a4f00-5df1-4a16-8638-cd612263a21e:image.png)

more options í•˜ë©´ ì°½ ëœ¬ë‹¤.

![image.png](attachment:be481af7-55ce-454c-9ae3-6744dd26d5e1:image.png)

- return type, name ìˆ˜ì •

â†’ ë¦¬íŒ©í† ë§ ê¸°ëŠ¥ ì¨ë„ ë˜ê³  ì§ì ‘ ì‘ì„± í•´ë„ ëœë‹¤.

**ìµœì¢… ë³€ê²½ í›„**

```java
    public MemberService memberService() {
        return new MemberServiceImlp(memberRepository());
    }

    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }
    
    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }
```

- ì—­í• ê³¼ ì—­í• ì— ëŒ€í•œ êµ¬í˜„ì´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í•œ ëˆˆì— ë“¤ì–´ì˜¬ ìˆ˜ ìˆë„ë¡ ì‘ì„±

## ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- ë“œë””ì–´ ì •ì•¡í• ì¸ ì •ì±… â†’ ì •ë¥  í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½

![image.png](attachment:9847cf4d-75a1-4152-b39c-bbc2467b81dc:image.png)

```java
    public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
```

- ë³€ê²½ì´ ì•„ì£¼ ê°„ë‹¨í•´ì¡Œë‹¤.
- ì‚¬ìš© ì˜ì—­ì— ìˆëŠ” ë¶€ë¶„ì€ ì „í˜€ ì† ëŒˆ í•„ìš”ê°€ ì—†ì–´ì¡Œë‹¤.

â‡’ OCP, DIP ë‹¤ ë§Œì¡±

## ì „ì²´ íë¦„ ì •ë¦¬

### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

- ë‹¤í˜•ì„± ë•ë¶„ì— rate discount policyë¥¼ ê°œë°œí•˜ëŠ” ê²ƒ ìì²´ëŠ” ë¬¸ì œê°€ ì—†ì—ˆìŒ.

### ì ìš©ê³¼ ë¬¸ì œì 

- ì ìš©í•˜ë ¤ê³  í•˜ë‹ˆ **í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ**(ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´)ë„ í•¨ê»˜ ë³€ê²½í•´ì•¼í•¨
    - ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸í„°í˜ì´ìŠ¤(DiscountPolicy)ë¿ ì•„ë‹ˆë¼, êµ¬ì²´ í´ë˜ìŠ¤(FixDiscountPolicy)ë„ í•¨ê»˜ ì˜ì¡´ â†’ **DIP ìœ„ë°˜**

### ê´€ì‹¬ì‚¬ ë¶„ë¦¬

- ê¸°ì¡´ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ì¡´í•˜ëŠ” ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ì§ì ‘ **ìƒì„±**í•˜ê³  **ì‹¤í–‰**
- AppConfigë¥¼ ë§Œë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**, **ì—°ê²°**í•˜ëŠ” ì±…ì„ì„ ì¤Œ.
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ìì‹ ì˜ ì—­í• ì¸ **ì‹¤í–‰**í•˜ëŠ” ê²ƒì—ë§Œ ì§‘ì¤‘

### AppConfig ë¦¬íŒ©í† ë§

- êµ¬ì„± ì •ë³´ì—ì„œ ì—­í• ê³¼ êµ¬í˜„ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬
- ì¤‘ë³µ ì œê±°

### ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- AppConfigê°€ ìˆëŠ” êµ¬ì„± ì˜ì—­ë§Œ ë³€ê²½í•˜ë©´ ë¨.
- ì‚¬ìš© ì˜ì—­ì¸ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•ŠìŒ.

## ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ê°€ì§€ ì›ì¹™ ì ìš©

ì¤‘ 3ê°€ì§€ ì ìš©

### SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ - í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.

- ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬
- êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfigê°€ ë‹´ë‹¹
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹

### DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™ - ì¶”ìƒí™”ì— ì˜ì¡´, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤. (ì˜ì¡´ì„± ì£¼ì…!)

- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ DiscountPolicy(ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤)ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½
- AppConfigê°€ FixDiscountPolicy ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ëŒ€ì‹  ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…

### OCP - ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆë‹¤.

- ë‹¤í˜•ì„±ì„ ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€ì¼œì•¼ í•¨.
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©ì˜ì—­ê³¼ êµ¬ì • ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ”
- AppConfig ì˜ì¡´ê´€ê³„ë¥¼ Fix â†’ Rateë¡œ ë³€ê²½í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•ŠìŒ.

## IoC, DI, **ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ**

### ì œì–´ì˜ ì—­ì „(IoC)

- í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒ.
- AppConfigê°€ ë“±ì¥í•œ ì´í›„ì— êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹. í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ AppConfigê°€ ë‹´ë‹¹. ì˜ˆë¥¼ ë“¤ì–´ì„œ `OrderServiceImpl` ì€ í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ í˜¸ì¶œí•˜ì§€ë§Œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë“¤ì´ ì‹¤í–‰ë ì§€ ëª¨ë¦„.

**í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬**

- í”„ë ˆì„ì›Œí¬ëŠ” ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•´ì£¼ê³ , ëŒ€ì‹  ì‹¤í–‰í•´ ì¤Œ. (JUnit)
- ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹

### **ì˜ì¡´ê´€ê³„ ì£¼ì…** DI(Dependency Injection)

- `OrderServiceImpl` ì€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤. ì‹¤ì œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì‚¬ìš©ë ì§€ëŠ” ëª¨ë¦„.
- **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„**
    - í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” import ì½”ë“œë§Œ ë³´ê³  ì‰½ê²Œ íŒë‹¨ ê°€ëŠ¥(ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„ ê°€ëŠ¥)
    - êµ¬ì²´ê°€ ì–´ë–¤ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ì§€ ì•Œ ìˆ˜ ìˆì§€ë§Œ ì–´ë–¤ ê°ì²´ê°€ ì£¼ì… ë˜ëŠ”ì§€ëŠ” ì•Œ ìˆ˜ ì—†ìŒ.
    
    ![í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](attachment:c9a241e6-9580-44f6-a319-691a7d2999f1:image.png)
    
    í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
    

â†’ í™”ì‚´í‘œê°€ í™”ì‚´í‘œ ë°©í–¥ìœ¼ë¡œ ë­”ê°€ë¥¼ ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ì˜ë¯¸

- ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” **ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„**
    
    ![ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨](attachment:eb7e9eb6-77a2-43dc-82a8-a4e0aa9815af:image.png)
    
    ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨
    
    - ì‹¤í–‰ ì‹œì (ëŸ°íƒ€ì„) ì—ì„œ ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒ â† ì˜ì¡´ê´€ê³„ ì£¼ì…
    - ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
    - ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

### ~~IoC **ì»¨í…Œì´ë„ˆ(ì˜ ì•ˆì”€)**,~~ DI **ì»¨í…Œì´ë„ˆ**

- AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê²ƒ
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì´ ë§ì¶°ì„œ ìµœê·¼ì—ëŠ” DI ì»¨í…Œì´ë„ˆë¼ í•¨.
- ì–´ì…ˆë¸”ëŸ¬ ë¼ê³ ë„ í•¨.

## ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜

`AppConfig`ë¥¼ ìŠ¤í”„ë§ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½

```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImlp(memberRepository());
    }
    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }
    @Bean
    public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }

}
```

`MemberApp`

```java
 public static void main(String[] args) {
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
```

`OrderApp`

```java
public static void main(String[] args) {
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();
//        OrderService orderService = appConfig.orderService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
        OrderService orderService = applicationContext.getBean("orderService", OrderService.class);

```

- `@Configuration` : êµ¬ì„± ì •ë³´ë¥¼ ë‹´ë‹¹í•œë‹¤ëŠ” ëœ»
- `@Bean` : ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ê³  í•¨.
- `@Bean` ì´ ë¶™ì€ ë©”ì„œë“œ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš© (`memberService`, `orderService`)

- `ApplicationContext` = ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
- `AppConfig`ì—ì„œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DI í–ˆì§€ë§Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©
- ì´ì „ì—ëŠ” `AppConfig`ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì¡°íšŒë¥¼ í–ˆì–´ì•¼ í–ˆì§€ë§Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    - `applicationContext.getBean(ì´ë¦„, íƒ€ì…)`

- ì½”ë“œê°€ ë³µì¡í•´ì¡ŒëŠ”ë°â€¦ ì–´ë–¤ ì¥ì ì´ ìˆì§€?

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

```java
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```

- `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
- `ApplicationContext`ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
- `AppConfig` ë¥¼ ì‚¬ìš©í–ˆë˜ ë°©ì‹ì´ ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜(XML ê¸°ë°˜ë„ ìˆë‹¤)ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“  ê²ƒ
- `new AnnotationConfigApplicationContext(AppConfig.class)` ëŠ” `ApplicationContext`ì˜ êµ¬í˜„ì²´

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ê³¼ì •

1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
    - `new AnnotationConfigApplicationContext(AppConfig.class)`
    - ìƒì„±í•  ë•Œ êµ¬ì„± ì •ë³´ ì§€ì •ì´ í•„ìš”í•¨. - `AppConfig.class` ë¥¼ êµ¬ì„± ì •ë³´ë¡œ ì§€ì •
2. ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡
    
    ![image.png](attachment:9cb87655-2041-439d-9823-d3f9b0c9d6d9:image.png)
    
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ë¹ˆì„ ë“±ë¡
    - ë¹ˆ ì´ë¦„
        - ë©”ì„œë“œ ì´ë¦„ ì‚¬ìš©
        - ì§ì ‘ ë¶€ì—¬ë„ ê°€ëŠ¥ @Bean(name=â€memberService2â€)
        - ì ˆëŒ€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬ í•´ì•¼ í•¨.
3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì •
    
    ![image.png](attachment:8500adcb-9185-4088-b8f5-ec5ffc5b2ed1:image.png)
    
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI) â† ë™ì  ì˜ì¡´ê´€ê³„

## ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

- ê³¨ë±…ì´ í•˜ë‚˜ë¡œ ì œëŒ€ë¡œ ë“±ë¡ ëœ ê±´ê°€? í™•ì¸í•´ë³´ì!

testì—ì„œ `beanfind/ApplicationContextInfoTest`

```java
public class ApplicationContextInfoTest {
    
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
    
    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        
        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }}
}
```

<aside>
ğŸ’¡

`iter` 

for ë¬¸ì„ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤Œ

</aside>

ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚´ê°€ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ë¿ ì•„ë‹ˆë¼ ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆë„ ê°™ì´ ì¶œë ¥ëœë‹¤. 

```bash
name = org.springframework.context.annotation.internalConfigurationAnnotationProcessor object = org.springframework.context.annotation.ConfigurationClassPostProcessor@43b4fe19
name = org.springframework.context.annotation.internalAutowiredAnnotationProcessor object = org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor@25ddbbbb
name = org.springframework.context.annotation.internalCommonAnnotationProcessor object = org.springframework.context.annotation.CommonAnnotationBeanPostProcessor@1536602f
name = org.springframework.context.event.internalEventListenerProcessor object = org.springframework.context.event.EventListenerMethodProcessor@4ebea12c
name = org.springframework.context.event.internalEventListenerFactory object = org.springframework.context.event.DefaultEventListenerFactory@2a1edad4
name = appConfig object = hello.core.AppConfig$$SpringCGLIB$$0@6256ac4f
name = memberService object = hello.core.member.MemberServiceImlp@44c79f32
name = memberRepository object = hello.core.member.MemoryMemberRepository@7fcbe147
name = orderService object = hello.core.order.OrderServiceImpl@235f4c10
name = discountPolicy object = hello.core.discount.RateDiscountPolicy@743cb8e0
```

â‡’ ì½”ë“œë¥¼ ì‚´ì§ ìˆ˜ì •í•´ì„œ ì‹¤í–‰í•˜ë©´ ë‚´ê°€ ë§Œë“  5ê°œë§Œ ì¶œë ¥ë¨.

```java
@Test
    @DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findApplicationBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        
        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

            //Role ROLE_APPLICATION: ì§ì ‘ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ
            //Role ROLE_INFRASTRUCTURE: ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
            if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName + " object = " + bean);

            }
        }}
```

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸ ë°©ë²•

### ë¹ˆ ì´ë¦„ê³¼ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ

- `ac.getBean(ë¹ˆì´ë¦„, íƒ€ì…)`, `ac.getBean(íƒ€ì…)`

```java
public class ApplicationContextBasicFindTest {
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName() {
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        Assertions.assertThat(memberService).isInstanceOf(MemberServiceImlp.class);
    }

    @Test
    @DisplayName("ì´ë¦„ ì—†ì´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByType() {
        MemberService memberService = ac.getBean(MemberService.class);
        Assertions.assertThat(memberService).isInstanceOf(MemberServiceImlp.class);
    }

}
    
```

êµ¬í˜„ì²´ë¡œ ì¡°íšŒí•˜ëŠ” ì½”ë“œ : êµ¬í˜„ì— ì˜ì¡´ëœ ì½”ë“œë¼ ì¢‹ì€ ì½”ë“œëŠ” ì•„ë‹˜.

```java
    @Test
    @DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName2() {
        MemberService memberService = ac.getBean("memberService", MemberServiceImlp.class);
        Assertions.assertThat(memberService).isInstanceOf(MemberServiceImlp.class);
    }
```

### ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸

- ë§Œì•½ ì¡°íšŒê°€ ì•ˆë˜ë©´..ì¼ ë•Œì˜ í…ŒìŠ¤íŠ¸

```java
    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX")
    void findBeanByNameX(){
//        ac.getBean("xxxxx", MemberService.class);
//        org.junit.jupiter.api.Assertions ìœ¼ë¡œ ë¶€í„° ê°€ì ¸ì˜´ assertThrows
        assertThrows(NoSuchBeanDefinitionException.class,
                () -> ac.getBean("xxxxx", MemberService.class));
        // í•´ë‹¹ ì˜ˆì™¸ê°€ í„°ì ¸ì•¼ í…ŒìŠ¤íŠ¸ ì„±ê³µ
    }
```

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ë™ì¼í•œ íƒ€ì… ë‘˜ ì´ìƒ

- ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì´ë•ŒëŠ” ë¹ˆ ì´ë¦„ ì§€ì •í•´ì•¼ í•¨.
- `ac.getBeansOfType()` í•˜ë©´ í•´ë‹¹ íƒ€ì…ì˜ ëª¨ë“  ë¹ˆì„ ì¡°íšŒ í•  ìˆ˜ ìˆìŒ

ê·¸ëƒ¥ íƒ€ì…ìœ¼ë¡œ getBean í•  ë•Œ ê°™ì€ íƒ€ì… ë‘ ê°œë©´ ì´ëŸ° ì—ëŸ¬ê°€ ë‚œë‹¤.

```java
NoUniqueBeanDefinitionException: memberRepository1,memberRepository2
```

AppConfigë¥¼ ìˆ˜ì •í•˜ê¸°ëŠ” ê·€ì°®ìœ¼ë‹ˆê¹Œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë‚´ë¶€ì— configurationì„ ë§Œë“¤ì–´ ì¤€ë‹¤.

`SameBeanConfig`

```java
public class ApplicationContextSameBeanFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SameBeanConfig.class);

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤")
    void findBeanByTypeDuplicate() {
        MemberRepository bean = ac.getBean(MemberRepository.class);
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(MemberRepository.class));
    }

    @Configuration
    static class SameBeanConfig {
        @Bean
        public MemberRepository memberRepository1() {
            return new MemoryMemberRepository();
        }

        @Bean
        public MemberRepository memberRepository2() {
            return new MemoryMemberRepository();
        }
    }
}
```

### ê°™ì€ íƒ€ì…ì´ë¼ë©´ ë¹ˆ ì´ë¦„ì„ ì§€ì •

```java
    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
    void findBeanByName() {
        MemberRepository memberRepository = ac.getBean("memberRepository1", MemberRepository.class);
        assertThat(memberRepository).isInstanceOf(MemberRepository.class);
    }
```

### íŠ¹ì • íƒ€ì… ì „ë¶€ ì¡°íšŒ

```java
    @Test
    @DisplayName("íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByType() {
        Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));

        }
        System.out.println("beansOfType = " + beansOfType);
        assertThat(beansOfType.size()).isEqualTo(2);
    }
```

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ìƒì† ê´€ê³„

- ë¶€ëª¨ íƒ€ì…ì„ ì¡°íšŒí•˜ë©´ ìì‹ íƒ€ì…ì€ ì „ë¶€ ë‹¤ í•¨ê»˜ ì¡°íšŒëœë‹¤.
- Object íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•¨.

```java
public class ApplicationContextExtendsFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤")
    void findBeanByParentTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(DiscountPolicy.class));
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
    void findBeanByParentTypeBeanName() {
        DiscountPolicy rateDiscountPolicy = ac.getBean("rateDiscountPolicy", DiscountPolicy.class);
        assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByParentType() {
        Map<String, DiscountPolicy> beansOfType = ac.getBeansOfType(DiscountPolicy.class);
        assertThat(beansOfType.size()).isEqualTo(2);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸° - Object")
    void findAllBeanByObjectType() {
        Map<String, Object> beansOfType = ac.getBeansOfType(Object.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
    }

    @Test
    @DisplayName("íŠ¹ì • í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ") void findBeanBySubType() {
        RateDiscountPolicy bean = ac.getBean(RateDiscountPolicy.class);
        assertThat(bean).isInstanceOf(RateDiscountPolicy.class);
    }

    @Configuration
    static class TestConfig {
        @Bean
        public DiscountPolicy rateDiscountPolicy() {
            return new RateDiscountPolicy();
        }

        @Bean
        public  DiscountPolicy fixDiscountPolicy() {
            return new FixDiscountPolicy();
        }
    }
}
```

## BeanFactory ì™€ ApplicationContext

![image.png](attachment:c668a544-18be-452a-bbb8-73f2424c8e64:image.png)

### BeanFactory

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
- ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í• 
- `getBean()`ì„ ì œê³µ

### ApplicationContext

- BeanFactory ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ì„œ ì œê³µ
- ë¹ˆ ê´€ë¦¬, ì¡°íšŒ ê¸°ëŠ¥ + ìˆ˜ ë§ì€ ë¶€ê°€ê¸°ëŠ¥
- ì œê³µí•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ë“¤
    
    ![image.png](attachment:283d888e-c61c-4b5d-9ada-2a6c6e4a2e37:image.png)
    
    - ë©”ì„¸ì§€ ì†ŒìŠ¤
        - êµ­ì œí™” ê¸°ëŠ¥ : í•œêµ­ì— ì˜¤ë©´ í•œêµ­ì–´ë¡œ, ì˜ì–´ê¶Œì€ ì˜ì–´ë¡œ ì¶œë ¥
    - í™˜ê²½ ë³€ìˆ˜
        - ë¡œì»¬, ê°œë°œ, ìš´ì˜ ë“± êµ¬ë¶„í•´ì„œ ì²˜ë¦¬
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸
        - ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³  êµ¬ë…í•˜ëŠ” ëª¨ë¸ì„ í¸ë¦¬í•˜ê²Œ ì§€ì›
    - ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
        - íŒŒì¼, í´ë˜ìŠ¤íŒ¨ìŠ¤, ì™¸ë¶€ ë“± ë¦¬ì†ŒìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ
- BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. ë¶€ê°€ê¸°ëŠ¥ì´ ìˆëŠ” ApplicationContextë¥¼ ì‚¬ìš©í•¨.

## ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ ì§€ì› - ìë°” ì½”ë“œ, XML

- ìë°” ì½”ë“œ, XML, Groovy ë“±ë“± ë‹¤ ëœë‹¤.

![image.png](attachment:77487c18-c431-4423-b366-9cdd432833b4:image.png)

### ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜

```java
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```

- `AnnotationConfigApplicationContext` í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ìë°” ì½”ë“œë¡œ ëœ ì„¤ì • ì •ë³´ë¥¼ ë„˜ê¹€

### XML ê¸°ë°˜ ì„¤ì • ì‚¬ìš©

- ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ë§ì´ ì‚¬ìš©í•˜ë©´ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- `GenericXmlApplicationContext` ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ xml ì„¤ì • ì •ë³´ë¥¼ ë„˜ê¹€
- ìë°” ëŒ€ì‹  xml ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì™¸ì—ëŠ” ë‹¬ë¼ì§€ëŠ” ê²ƒì´ ì—†ë‹¤.
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
        <bean id="memberService" class="hello.core.member.MemberServiceImpl">
            <constructor-arg name="memberRepository" ref="memberRepository" />
        </bean>
        <bean id="memberRepository" class="hello.core.member.MemoryMemberRepository" />
        <bean id="orderService" class="hello.core.order.OrderServiceImpl">
            <constructor-arg name="memberRepository" ref="memberRepository" />
            <constructor-arg name="discountPolicy" ref="discountPolicy" />
        </bean>
        <bean id="discountPolicy" class="hello.core.discount.RateDiscountPolicy" />
    </beans>
    ```
    

## ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition

- **BeanDefinition**ì´ë¼ëŠ” ì¶”ìƒí™” ë•ë¶„ = **ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´**
- ì—­í• ê³¼ êµ¬í˜„ì„ ê°œë…ì ìœ¼ë¡œ ë‚˜ëˆˆ ê²ƒ
    - XML ì„ ì½ì–´ì„œ BeanDefinitionì„ ë§Œë“ ë‹¤.
    - ìë°” ë¥¼ ì½ì–´ì„œ BeanDefinitionì„ ë§Œë“ ë‹¤.
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì˜¤ì§ BeanDefinitionë§Œ ì•Œë©´ ëœë‹¤.
- ë¹ˆ ë‹¹ í•˜ë‚˜ì”© ë©”íƒ€ ì •ë³´ê°€ ìƒì„±ëœë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ ë©”íƒ€ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹ˆì„ ìƒì„±

![image.png](attachment:194ae4fb-391a-4578-abbc-b05fa96256f3:image.png)

- BeanDefinitionì„ ì§ì ‘ ìƒì„±í•´ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•  ìˆ˜ ìˆë‹¤. ê·¼ë° ê·¸ëŸ´ ì¼ ê±°ì˜ ì—†ìŒ.
- ìŠ¤í”„ë§ì´ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì„¤ì • ì •ë³´ë¥¼ BeanDefinitionìœ¼ë¡œ ì¶”ìƒí™”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì •ë„ë§Œ ì´í•´.

- **BeanDefinition ì •ë³´**
    - BeanClassName: ìƒì„±í•  ë¹ˆì˜ í´ë˜ìŠ¤ ëª…(ìë°” ì„¤ì • ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)
    - factoryBeanName: íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•  ê²½ìš° ì´ë¦„, ì˜ˆ) appConfig
    - factoryMethodName: ë¹ˆì„ ìƒì„±í•  íŒ©í† ë¦¬ ë©”ì„œë“œ ì§€ì •, ì˜ˆ) memberService
    - Scope: ì‹±ê¸€í†¤(ê¸°ë³¸ê°’)
    - lazyInit: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ë¹ˆì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ë¹ˆì„ ì‚¬ìš©í•  ë•Œ ê¹Œì§€ ìµœëŒ€í•œ ìƒì„±ì„ ì§€ì—°
    - ì²˜ë¦¬ í•˜ëŠ”ì§€ ì—¬ë¶€
    - InitMethodName: ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì ìš©í•œ ë’¤ì— í˜¸ì¶œë˜ëŠ” ì´ˆê¸°í™” ë©”ì„œë“œ ëª…
    - DestroyMethodName: ë¹ˆì˜ ìƒëª…ì£¼ê¸°ê°€ ëë‚˜ì„œ ì œê±°í•˜ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ëª…
    - Constructor arguments, Properties: ì˜ì¡´ê´€ê³„ ì£¼ì…ì—ì„œ ì‚¬ìš©í•œë‹¤. (ìë°” ì„¤ì • ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)

## í˜¼ê³µì»´ìš´

### CPU ì„±ëŠ¥ í–¥ìƒ ê¸°ë²•

**ë¹ ë¥¸ CPUë¥¼ ìœ„í•œ ì„¤ê³„ ê¸°ë²•**

`í´ëŸ­` : ë¶€í’ˆë“¤ì€ í´ëŸ­ ì‹ í˜¸ì— ë”°ë¼ ì›€ì§ì¸ë‹¤.

- í´ëŸ­ ì†ë„ê°€ ë†’ì„ ìˆ˜ë¡ CPU ì„±ëŠ¥ì´ ì¢‹ë‹¤. CPU ì†ë„ ë‹¨ìœ„ = í´ëŸ­ ì†ë„
- ë¬´ì‘ì • ë†’ë‹¤ê³  ì¢‹ì§€ëŠ” ì•Šë‹¤. ì™œ? ë°œì—´ ë¬¸ì œ!!

â†’ `ì½”ì–´`ì™€ `ìŠ¤ë ˆë“œ` ìˆ˜ë¥¼ ëŠ˜ë¦¬ëŠ” ë°©ë²•

`ë©€í‹°ì½”ì–´` : CPUí•˜ë‚˜ì— ì½”ì–´(CPU)ê°€ ì—¬ëŸ¬ê°œ ìˆë‹¤.

- ì—°ì‚°ì†ë„ê°€ ì½”ì–´ ìˆ˜ì— ë¹„ë¡€í•˜ì—¬ ì¦ê°€í•˜ì§€ëŠ” ì•ŠìŒ.(íŒ€í”Œì„ ìƒê°í•´ë³´ì..)
- ì½”ì–´ë§ˆë‹¤ ì²˜ë¦¬í•  ëª…ë ¹ì–´ë¥¼ ì–¼ë§ˆë‚˜ ì ì ˆí•˜ê²Œ ë¶„ë°°í•˜ëŠëƒê°€ ì—°ì‚° ì†ë„ì— í° ì˜í–¥ì„ ì¤€ë‹¤.

`ìŠ¤ë ˆë“œ` : ì‹¤í–‰ íë¦„ì˜ ë‹¨ìœ„(ì‚¬ì „ì )

- `í•˜ë“œì›¨ì–´ì  ìŠ¤ë ˆë“œ` : í•˜ë‚˜ì˜ ì½”ì–´ê°€ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ëª…ë ¹ì–´ ë‹¨ìœ„ (ì˜ˆ, 8ì½”ì–´ 16ìŠ¤ë ˆë“œ cpu â‡’ ì½”ì–´ í•˜ë‚˜ë‹¹ 2 ê°œì˜ í•˜ë“œì›¨ì–´ ìŠ¤ë ˆë“œë¥¼ ì²˜ë¦¬)
- `ì†Œí”„íŠ¸ì›¨ì–´ì  ìŠ¤ë ˆë“œ` :  í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ë‹¨ìœ„
    1. ì‚¬ìš©ìë¡œ ë¶€í„° ì…ë ¥ë°›ì€ ë‚´ìš©ì„ í™”ë©´ì— ë³´ì—¬ ì£¼ëŠ” ê¸°ëŠ¥
    2. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë‚´ìš©ì´ ë§ì¶¤ë²•ì— ë§ëŠ”ì§€ ê²€ì‚¬í•˜ëŠ” ê¸°ëŠ¥
    3. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë‚´ìš©ì„ ìˆ˜ì‹œë¡œ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ 
    - ì„ ê°ê° ìŠ¤ë ˆë“œë¡œ ë§Œë“¤ì–´ì„œ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

`ë©€í‹°ìŠ¤ë ˆë“œ í”„ë¡œì„¸ì„œ`

- í•˜ë‚˜ì˜ ì½”ì–´ë¡œ ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” CPU
- ë ˆì§€ìŠ¤í„° ì„¸íŠ¸ê°€ ì½”ì–´ ë‹¹ 2ê°œì”© ìˆë‹¤ë©´ 2ìŠ¤ë ˆë“œê°€ ë˜ëŠ” ê²ƒ ì²˜ëŸ¼.. ê·¸ë¦¼ì— ë‚˜ì™€ìˆìŒ.

## í”„ë¡œì íŠ¸ ê³¼ì œ

### ERDë€?

[https://velog.io/@kjhxxxx/DataBase-ERDë€](https://velog.io/@kjhxxxx/DataBase-ERD%EB%9E%80)

ëŒ€ì¶© ì—”í‹°í‹°ë“¤(í•„ìš”í•œ ë°ì´í„°ë“¤)ì˜ ê´€ê³„ë¥¼ í‘œí˜„í•˜ëŠ” ê·¸ë¦¼ì¸ ê²ƒ ê°™ë‹¤. 

ì´ê²ƒë„ í‘œí˜„í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•ì´ ìˆëŠ” ë“¯ í•˜ë‹¤.

**1ë²ˆ ë°©ë²•**

![image.png](attachment:b1f7f746-013b-4e90-8439-bee5f857afe1:image.png)

![image.png](attachment:01d2dd20-098b-49db-ace6-ec20ec2dddd8:image.png)

**2ë²ˆ ë°©ë²•**

![image.png](attachment:2a76b88c-b855-4f42-9d3a-53523a2cbb64:image.png)

figjamìœ¼ë¡œ í•´ë³´ë ¤ í–ˆëŠ”ë° í…œí”Œë¦¿ì´ 2ë²ˆ ë°©ë²•ì´ ìˆë‹¤.

![image.png](attachment:7337ce6e-9ce4-42ac-96a8-0a6f39bd1168:image.png)

ê·¼ë°.. ë‚˜í•œí…ŒëŠ” 1ë²ˆ ë°©ë²•ì´ ë³´ë‹¤ ë” ì§ê´€ì ì¸ ê²ƒ ê°™ì•„ì„œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì„ ì°¾ì•„ë´¤ë‹¤.

[ERDCloud](https://www.erdcloud.com/) -  íŒ€í”Œë„ ê°€ëŠ¥í•˜ê³  ì¢‹ì€ ë“¯

ì´ëŸ° ì‹ìœ¼ë¡œ ê·¸ë ¤ë´¤ë‹¤. uiê°€ ì¡°ê¸ˆ êµ¬ë¦°ë° ê·¸ë˜ë„ ì¢‹ë‹¤.

![image.png](attachment:4b7c59df-3bd0-4e8e-866f-288db77468a6:image.png)


ë.